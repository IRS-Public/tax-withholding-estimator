<?xml version="1.0"?>
<?xml-model href="./FactDictionaryModule.rng"?>
<FactDictionaryModule>
  <Facts>
    <Fact path="/tier1UpperLimit">
      <Description>
        Choose correct upper income limit for 0% calculations based on filing
        status. Line 6 - Qualified Dividends and Capital Gain Worksheet
      </Description>
      <TaxYear>2026</TaxYear>
      <Derived>
        <Switch>
          <Case>
            <When>
              <Any>
                <Dependency path="/isFilingStatusSingle"/>
                <Dependency path="/isFilingStatusMFS"/>
              </Any>
            </When>
            <Then>
              <Dollar>49450.00</Dollar>
            </Then>
          </Case>
          <Case>
            <When>
              <Any>
                <Dependency path="/isFilingStatusMFJ"/>
                <Dependency path="/isFilingStatusQSS"/>
              </Any>
            </When>
            <Then>
              <Dollar>98900.00</Dollar>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="/isFilingStatusHOH"/>
            </When>
            <Then>
              <Dollar>66200.00</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>
    <Fact path="/tier2UpperLimit">
      <Description>
        Choose correct upper income limit for 15% calculations based on filing status.
        Line 13 - Qualified Dividends and Capital Gain Worksheet
      </Description>
      <TaxYear>2026</TaxYear>
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/isFilingStatusSingle"/>
            </When>
            <Then>
              <Dollar>545500.00</Dollar>
            </Then>
          </Case>
          <Case>
            <When>
              <Any>
                <Dependency path="/isFilingStatusMFJ"/>
                <Dependency path="/isFilingStatusQSS"/>
              </Any>
            </When>
            <Then>
              <Dollar>613700.00</Dollar>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="/isFilingStatusHOH"/>
            </When>
            <Then>
              <Dollar>579600.00</Dollar>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="/isFilingStatusMFS"/>
            </When>
            <Then>
              <Dollar>306850.00</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>
    <Fact path="/qualifiedDividendsAndLongTermCapitalGains">
      <Description>The sum of Qualified Dividends and Long-Term Capital Gains.
        Line 4 - Qualified Dividends and Capital Gain Worksheet
      </Description>
      <Derived>
        <Add>
          <Dependency path="/qualifiedDividendsIncome"/>
          <Dependency path="/longTermCapitalGainsIncome"/>
        </Add>
      </Derived>
    </Fact>
    <Fact path="/taxableIncomeMinusQualifiedDividends">
      <Description>
        Remaining taxable income after subtracting qualified dividends and long-term capital gains.
        Line 5 - Qualified Dividends and Capital Gain Worksheet
      </Description>
      <Derived>
        <Subtract>
          <Minuend>
            <Dependency path="/taxableIncome"/>
          </Minuend>
          <Subtrahends>
            <Dependency path="/qualifiedDividendsAndLongTermCapitalGains"/>
          </Subtrahends>
        </Subtract>
      </Derived>
    </Fact>
    <Fact path="/positiveTaxableIncomeMinusQualifiedDividends">
      <Description>
        If /taxableIncomeMinusQualifiedDividends is less than 0, use 0.
        Otherwise, use /taxableIncomeMinusQualifiedDividends.
        Line 5 - Qualified Dividends and Capital Gain Worksheet
      </Description>
      <Derived>
        <GreaterOf>
          <Dependency path="/taxableIncomeMinusQualifiedDividends"/>
          <Dollar>0.00</Dollar>
        </GreaterOf>
      </Derived>
    </Fact>
    <Fact path="/minOfTaxableIncomeOrTier1">
      <Description>
        The smaller value of taxable income vs tier 1 upper limit.
        Line 7 - Qualified Dividends and Capital Gain Worksheet
      </Description>
      <Derived>
        <LesserOf>
          <Dependency path="/taxableIncome"/>
          <Dependency path="/tier1UpperLimit"/>
        </LesserOf>
      </Derived>
    </Fact>
    <Fact path="/minOfTaxableIncomeBeforeOrAfterQualifiedDividends">
      <Description>
        The smaller value of taxable income vs [taxable income minus qualified dividends].
        Line 8 - Qualified Dividends and Capital Gain Worksheet
      </Description>
      <Derived>
        <LesserOf>
          <Dependency path="/positiveTaxableIncomeMinusQualifiedDividends"/>
          <Dependency path="/minOfTaxableIncomeOrTier1"/>
        </LesserOf>
      </Derived>
    </Fact>
    <Fact path="/amountOfDividendsTaxedAt0">
      <Description>
        Amount of Qualified Dividends Taxed at 0%.
        Line 9 - Qualified Dividends and Capital Gain Worksheet
      </Description>
      <Derived>
        <Subtract>
          <Minuend>
            <Dependency path="/minOfTaxableIncomeOrTier1"/>
          </Minuend>
          <Subtrahends>
            <Dependency path="/minOfTaxableIncomeBeforeOrAfterQualifiedDividends"/>
          </Subtrahends>
        </Subtract>
      </Derived>
    </Fact>
    <Fact path="/lesserOfTaxableIncomeOrQualifiedDividendsAndGains">
      <Description>
        The lesser of either /taxableIncome or /qualifiedDividendsAndLongTermCapitalGain.
        Line 10 - Qualified Dividends and Capital Gain Worksheet
      </Description>
      <Derived>
        <LesserOf>
          <Dependency path="/taxableIncome"/>
          <Dependency path="/qualifiedDividendsAndLongTermCapitalGains"/>
        </LesserOf>
      </Derived>
    </Fact>
    <Fact path="/remainingToTaxAfter0">
      <Description>
        Subtract /amountOfDividendsTaxedAt0 from /lesserOfTaxableIncomeOrQualifiedDividendsAndGains.
        Line 12 - Qualified Dividends and Capital Gain Worksheet
      </Description>
      <Derived>
        <Subtract>
          <Minuend>
            <Dependency path="/lesserOfTaxableIncomeOrQualifiedDividendsAndGains"/>
          </Minuend>
          <Subtrahends>
            <Dependency path="/amountOfDividendsTaxedAt0"/>
          </Subtrahends>
        </Subtract>
      </Derived>
    </Fact>
    <Fact path="/remainingTaxableFor15">
      <Description>
        Subtract Line 15 from Line 14 to calculate remaining amount eligible to be taxed at 15%.
        Line 16 - Qualified Dividends and Capital Gain Worksheet
      </Description>
      <Derived>
        <Subtract>
          <Minuend>
            <!-- Line 14: Choose the smaller of /taxableIncome or /tier2UpperLimit-->
            <LesserOf>
              <Dependency path="/taxableIncome"/>
              <Dependency path="/tier2UpperLimit"/>
            </LesserOf>
          </Minuend>
          <Subtrahends>
            <!-- Line 15: Equal to the sum of Lines 5 and 9 -->
            <Dependency path="/positiveTaxableIncomeMinusQualifiedDividends"/>
            <Dependency path="/amountOfDividendsTaxedAt0"/>
          </Subtrahends>
        </Subtract>
      </Derived>
    </Fact>
    <Fact path="/positiveRemainingTaxableFor15">
      <Description> If /remainingTaxableFor15 is less than 0, use 0.
        Otherwise, use /remainingTaxableFor15.
        Line 16 - Qualified Dividends and Capital Gain Worksheet
      </Description>
      <Derived>
        <GreaterOf>
          <Dependency path="/remainingTaxableFor15"/>
          <Dollar>0.00</Dollar>
        </GreaterOf>
      </Derived>
    </Fact>
    <Fact path="/lesserOfremainingToTaxAfter0OrpositiveRemainingTaxableFor15">
      <Description>Lesser amount when comparing /remainingToTaxAfter0 and
        /positiveRemainingTaxableFor15, Line 12 vs Line 16
        Line 17 - Qualified Dividends and Capital Gain Worksheet
      </Description>
      <Derived>
        <LesserOf>
          <Dependency path="/remainingToTaxAfter0"/>
          <Dependency path="/positiveRemainingTaxableFor15"/>
        </LesserOf>
      </Derived>
    </Fact>
    <Fact path="/totalQualifiedDividends15Tax">
      <Description>Tax withholding based on 15% tax of eligible qualified dividends.
        Line 18 - Qualified Dividends and Capital Gain Worksheet
      </Description>
      <Derived>
        <Multiply>
          <LesserOf>
            <Dependency path="/remainingToTaxAfter0"/>
            <Dependency path="/positiveRemainingTaxableFor15"/>
          </LesserOf>
          <Rational>15/100</Rational>
        </Multiply>
      </Derived>
    </Fact>
    <Fact path="/remainingTaxableFor20">
      <Description> Subtract Line 19 from Line 10 to calculate remaining amount eligible to be taxed
        at 20%.
        Line 20 - Qualified Dividends and Capital Gain Worksheet
      </Description>
      <Derived>
        <Subtract>
          <Minuend>
            <!-- Line 10 -->
            <Dependency path="/lesserOfTaxableIncomeOrQualifiedDividendsAndGains"/>
          </Minuend>
          <Subtrahends>
            <!-- Line 19: Add lines 9 and 17 -->
            <Dependency path="/amountOfDividendsTaxedAt0"/>
            <Dependency path="/lesserOfremainingToTaxAfter0OrpositiveRemainingTaxableFor15"/>
          </Subtrahends>
        </Subtract>
      </Derived>
    </Fact>
    <Fact path="/totalQualifiedDividends20Tax">
      <Description>Tax withholding based on 20% tax of eligible qualified dividends.
        Line 21 - Qualified Dividends and Capital Gain Worksheet
      </Description>
      <Derived>
        <Multiply>
          <Dollar>0.20</Dollar>
          <Dependency path="/remainingTaxableFor20"/>
        </Multiply>
      </Derived>
    </Fact>
    <Fact path="/totalQualifiedDividendsWithholding">
      <Description>Line 23 - Sum of all tax withholding for qualified dividends</Description>
      <Derived>
        <Add>
          <Dependency path="/totalQualifiedDividends15Tax"/>
          <Dependency path="/totalQualifiedDividends20Tax"/>
        </Add>
      </Derived>
    </Fact>
  </Facts>
</FactDictionaryModule>
