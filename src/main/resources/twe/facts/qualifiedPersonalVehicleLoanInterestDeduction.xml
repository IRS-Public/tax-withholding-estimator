<?xml-model href="./FactDictionaryModule.rng"?>
<FactDictionaryModule>
    <Facts>
        <!--        QVPLID Base Requirements-->
        <Fact path="/isVehiclePurchasedAfterEffectiveDate">
            <Name>Is vehicle purchased after 12/31/13</Name>
            <Writable>
                <Boolean/>
            </Writable>
        </Fact>
        <Fact path="/isQVPIndebtednessIncurredAfterEffectiveDate">
            <Name>Is QPV purchased and a loan originated after 12/34/24</Name>
            <Description>OB3 Section 70203 temporarily amending §163(h)(4)(B)(i): QPVLID Requirement: Any interest which
                is paid or accrued during the taxable year on indebtedness incurred by the taxpayer after December 31,
                2024
            </Description>
            <Writable>
                <Boolean/>
            </Writable>
        </Fact>
        <Fact path="/isVehicleLoanFirstLien">
            <Name>Is QPV purchased with a first lien loan</Name>
            <Description>OB3 Section 70203 temporarily amending §163(h)(4)(B)(ii): QPVLID Requirement: Loan must be
                secured by a first lien
            </Description>
            <Writable>
                <Boolean/>
            </Writable>
        </Fact>
        <!--        QPVLID Exclusions-->
        <Fact path="/isVehicleLoanFinancingFleetSale">
            <Name>Is loan used to finance fleet sales</Name>
            <Description>OB3 Section 70203 temporarily amending §163(h)(4)(B)(ii)(i): QVPLID Exclusion: A loan to
                finance fleet sales.
            </Description>
            <Writable>
                <Boolean/>
            </Writable>
        </Fact>
        <Fact path="/isVehicleForPersonalUse">
            <Name>Is QPV purchased for personal use</Name>
            <Description>OB3 Section 70203 temporarily amending §163(h)(4)(B)(ii)(ii): QVPLID Exclusion: A loan incurred
                for the purchase of a commercial vehicle that is not used for personal purposes.
            </Description>
            <Writable>
                <Boolean/>
            </Writable>
        </Fact>
        <Fact path="/isVehicleLeaseFinanced">
            <Name>Is QPV purchased with lease financing</Name>
            <Description>OB3 Section 70203 temporarily amending §163(h)(4)(B)(ii)(iii): QVPLID Exclusion: Any lease
                financing
            </Description>
            <Writable>
                <Boolean/>
            </Writable>
        </Fact>
        <Fact path="/hasSalvageTitleOrPurchasedToScrap">
            <Name>Is QPV purchased with a salvage title or with the intent to scrap for parts</Name>
            <Description>OB3 Section 70203 temporarily amending §163(h)(4)(B)(ii)(iv-v): QVPLID Exclusions: A loan to
                finance the purchase of a vehicle with a salvage title or A loan to finance the purchase of a vehicle
                intended to be used for scrap or parts.
            </Description>
            <Writable>
                <Boolean/>
            </Writable>
            (IV) A loan to finance the purchase of a vehicle with a salvage title. (V) A loan to finance the purchase of
            a vehicle intended to be used for scrap or parts.
        </Fact>
        <!--        VIN Requirement-->
        <Fact path="/doesHaveVIN">
            <Name>Can the taxpayer provide a VIN as part of their tax return</Name>
            <Description>OB3 Section 70203 temporarily amending §163(h)(4)(B)(iii): QVPLID Requirement: Provide a VIN as
                part of tax return for the taxable years
            </Description>
            <Writable>
                <Boolean/>
            </Writable>
        </Fact>
        <!--        Applicable passenger vehicle (APV) definition-->
        <Fact path="/isTaxpayerOriginalUser">
            <Name>Original user of the vehicle</Name>
            <Description>OB3 Section 70203 temporarily amending §163(h)(4)(D)(i): APV Requirement: original use
                commences with the taxpayer
            </Description>
            <Writable>
                <Boolean/>
            </Writable>
        </Fact>
        <Fact path="/isVehicleManufacturedForStreetsRoadsAndHighways">
            <Name>Vehicle Manufacturing Criteria</Name>
            <Description>OB3 Section 70203 temporarily amending §163(h)(4)(D)(ii): APV Requirement: vehicle is
                manufactured primarily for streets, roads and highways
            </Description>
            <Writable>
                <Boolean/>
            </Writable>
        </Fact>
        <Fact path="/isVehicleGTETwoWheels">
            <Name>Vehicle wheel number</Name>
            <Description>OB3 Section 70203 temporarily amending §163(h)(4)(D)(iii): APV Requirement: vehicle has at
                least 2 wheels
            </Description>
            <Writable>
                <Boolean/>
            </Writable>
        </Fact>
        <Fact path="/isVehicleApplicableType">
            <Name>QPV type is applicable</Name>
            <Description>OB3 Section 70203 temporarily amending §163(h)(4)(D)(iv): APV Requirement: vehicle is car,
                minivan, van, sport utility
                vehicle, pickup truck, or motorcycle
            </Description>
            <Writable>
                <Boolean/>
            </Writable>
        </Fact>
        <Fact path="/isVehicleUnderGVWRMax">
            <Name>QPV under max Gross Vehicle Weight RatingGVWR</Name>
            <Description>OB3 Section 70203 temporarily amending §163(h)(4)(D)(vi): APV Requirement: vehicle is under 14k
                GVWR
            </Description>
            <Writable>
                <Boolean/>
            </Writable>
        </Fact>
        <!--        Final assemble requirements-->
        <Fact path="/isVehicleAssembledInUSA">
            <Name>QPV assembled in US</Name>
            <Description>OB3 Section 70203 temporarily amending §163(h)(4)(E)(i): APV Requirement: vehicle final
                assembly is in US
            </Description>
            <Writable>
                <Boolean/>
            </Writable>
        </Fact>
        <!--        Interest paid on loan during taxable year-->
        <Fact path="/personalVehicleLoanInterestAmount">
            <Name>Interest paid on passenger vehicle loan</Name>
            <Description>How much interest have you paid on the passenger vehicle loan during the tax year?
            </Description>
            <Writable>
                <Dollar/>
            </Writable>
        </Fact>
        <!--        Eligibility and calculations-->
        <Fact path="/isEligibleForQualifiedPassengerVehicleLoanInterestDeduction">
            <Name>Eligible for Qualified Passenger Vehicle Loan Interest Deduction</Name>
            <Description>Taxpayer eligibility for</Description>
            <Derived>
                <All>
                    <Dependency path="/isQVPIndebtednessIncurredAfterEffectiveDate"/>
                    <Dependency path="/isVehicleLoanFirstLien"/>
                    <Not>
                        <All>
                            <Dependency path="/isVehicleLoanFinancingFleetSale"/>
                            <Dependency path="/isVehicleForPersonalUse"/>
                            <Dependency path="/isVehicleLeaseFinanced"/>
                            <Dependency path="/hasSalvageTitleOrPurchasedToScrap"/>
                        </All>
                    </Not>
                    <Dependency path="/doesHaveVIN"/>
                    <Dependency path="/isTaxpayerOriginalUser"/>
                    <Dependency path="/isVehicleManufacturedForStreetsRoadsAndHighways"/>
                    <Dependency path="/isVehicleGTETwoWheels"/>
                    <Dependency path="/isVehicleApplicableType"/>
                    <Dependency path="/isVehicleUnderGVWRMax"/>
                    <Dependency path="/isVehicleAssembledInUSA"/>
                    <GreaterThan>
                        <Left>
                            <Dependency path="/personalVehicleLoanInterestAmount"/>
                        </Left>
                        <Right>
                            <Dollar>0</Dollar>
                        </Right>
                    </GreaterThan>
                </All>
            </Derived>
        </Fact>
        <Fact path="/actualQPVLIDAdjustmentAmount">
            <Name>Actual amount of the personal vehicle loan interest deduction</Name>
            <Description>The lesser of 10000 or actual interest paid minus phase out amount, with a lowest possible
                value of 0
            </Description>
            <Derived>
                <GreaterOf>
                    <LesserOf>
                        <Dependency path="/maxQPVLIDAmount"/>
                        <Subtract>
                            <Minuend>
                                <Dependency path="/personalVehicleLoanInterestAmount"/>
                            </Minuend>
                            <Subtrahends>
                                <Dependency path="/phaseOutAmountQPVLID"/>
                            </Subtrahends>
                        </Subtract>
                    </LesserOf>
                    <Dollar>0</Dollar>
                </GreaterOf>
            </Derived>
        </Fact>
        <Fact path="/maxQPVLIDAmount">
            <Name>Maximum qualified personal vehicle loan deduction</Name>
            <Description>The maximum amount one is allowed to deduct because of qualified personal vehicle loan interest
                payments
            </Description>
            <TaxYear>2025</TaxYear>
            <Derived>
                <Dollar>10000</Dollar>
            </Derived>
        </Fact>
        <Fact path="/excessAmountQPVLIDForMFJFiler">
            <Derived>
                <GreaterOf>
                    <Subtract>
                        <Minuend>
                            <Dependency path="/magiExcludingQPVLID"/>
                        </Minuend>
                        <Subtrahends>
                            <Dollar>200000</Dollar>
                        </Subtrahends>
                    </Subtract>
                    <Dollar>0</Dollar>
                </GreaterOf>
            </Derived>
        </Fact>
        <Fact path="/excessAmountQPVLIDForNonMFJFiler">
            <Derived>
                <GreaterOf>
                    <Subtract>
                        <Minuend>
                            <Dependency path="/magiExcludingQPVLID"/>
                        </Minuend>
                        <Subtrahends>
                            <Dollar>100000</Dollar>
                        </Subtrahends>
                    </Subtract>
                    <Dollar>0</Dollar>
                </GreaterOf>
            </Derived>
        </Fact>
        <Fact path="/excessOverThresholdQPVLID">
            <Derived>
                <Switch>
                    <Case>
                        <When>
                            <Dependency path="/isFilingStatusMFJ" module="about-you"/>
                        </When>
                        <Then>
                            <Dependency path="/excessAmountQPVLIDForMFJFiler"/>
                        </Then>
                    </Case>
                    <Case>
                        <When>
                            <True/>
                        </When>
                        <Then>
                            <Dependency path="/excessAmountQPVLIDForNonMFJFiler"/>
                        </Then>
                    </Case>
                </Switch>
            </Derived>
        </Fact>
        <Fact path="/phaseOutAmountQPVLID">
            <Name>Qualified Personal Vehicle Loan Amount Phase Out</Name>
            <Description>Phaseout amount for the qualified personal vehicle loan deduction. phaseOutAmount = 200*(filing
                status specific MAGI/1000)
            </Description>
            <TaxYear>2025</TaxYear>
            <Derived>
                <Multiply>
                    <Divide>
                        <Dividend>
                            <Dependency path="/excessOverThresholdQPVLID"/>
                        </Dividend>
                        <Divisors>
                            <Dollar>1000</Dollar>
                        </Divisors>
                    </Divide>
                    <Dollar>200</Dollar>
                </Multiply>
            </Derived>
        </Fact>
        <Fact path="/magiExcludingQPVLID">
            <Name>Modified Adjusted Gross Income for Qualified Personal Vehicle Loan Deduction</Name>
            <Description>This is AGI, but without qualified personal vehicle loan interest deduction.</Description>
            <Derived>
                <Subtract>
                    <Minuend>
                        <Dependency path="/totalIncome" module="about-you"/>
                    </Minuend>
                    <Subtrahends>
                        <Dependency path="/adjustmentsToIncomeExcludingQPVLID" module="adjustments"/>
                    </Subtrahends>
                </Subtract>
            </Derived>
        </Fact>
    </Facts>
</FactDictionaryModule>