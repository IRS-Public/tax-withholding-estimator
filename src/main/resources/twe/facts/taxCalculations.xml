<?xml-model href="./FactDictionaryModule.rng"?>
<FactDictionaryModule>
  <Facts>
    <Fact path="/taxableIncome">
      <Description>Taxable income as reported on line 15 of Form 1040.</Description>
      <Derived>
        <Round>
          <Subtract>
            <Minuend>
              <Dependency path="/agi" />
            </Minuend>
            <Subtrahends>
              <Dependency path="/totalDeductions" />
            </Subtrahends>
          </Subtract>
        </Round>
      </Derived>
    </Fact>

    <Fact path="/agi">
      <Name>Adjusted Gross Income</Name>
      <Description>Total income to report on line 11 of Form 1040.</Description>
      <Derived>
        <Round>
          <Subtract>
            <Minuend>
              <Dependency module="income" path="/totalIncome" />
            </Minuend>
            <Subtrahends>
              <Dependency path="/adjustmentsToIncome" module="adjustments" />
            </Subtrahends>
          </Subtract>
        </Round>
      </Derived>
    </Fact>

    <Fact path="/magiForOB3BelowLineDeductions">
      <Name>Modified Adjusted Gross Income for OB3 Below Line Deductions</Name>
      <Description>Adjusted gross income of the taxpayer for the taxable year increased by any
        amount excluded
        from gross income under section 911, 931, or 933.
      </Description>
      <Derived>
        <Round>
          <Add>
            <Dependency path="/agi" />
            <Dependency path="/incomeToIncludeForOB3MAGI" module="income" />
          </Add>
        </Round>
      </Derived>
    </Fact>

    <Fact path="/roundedTaxableIncome">
      <Name>Rounded taxable income</Name>
      <Description>Income less than $100,000 uses the tax tables from the Instructions for
        Form 1040. This fact selects the "midpoint" that corresponds to each entry in the
        tax tables, for use in calculating tenative tax.
      </Description>
      <Derived>
        <Switch>
          <!-- No tax if you've got no taxable income -->
          <Case>
            <When>
              <LessThanOrEqual>
                <Left>
                  <Dependency path="/taxableIncome" />
                </Left>
                <Right>
                  <Dollar>0</Dollar>
                </Right>
              </LessThanOrEqual>
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
          <!-- There are three hardcoded midpoints for income less than $25 -->
          <Case>
            <When>
              <LessThan>
                <Left>
                  <Dependency path="/taxableIncome" />
                </Left>
                <Right>
                  <Dollar>5</Dollar>
                </Right>
              </LessThan>
            </When>
            <Then>
              <Dollar>2.50</Dollar>
            </Then>
          </Case>
          <Case>
            <When>
              <LessThan>
                <Left>
                  <Dependency path="/taxableIncome" />
                </Left>
                <Right>
                  <Dollar>15</Dollar>
                </Right>
              </LessThan>
            </When>
            <Then>
              <Dollar>10</Dollar>
            </Then>
          </Case>
          <Case>
            <When>
              <LessThan>
                <Left>
                  <Dependency path="/taxableIncome" />
                </Left>
                <Right>
                  <Dollar>25</Dollar>
                </Right>
              </LessThan>
            </When>
            <Then>
              <Dollar>20</Dollar>
            </Then>
          </Case>
          <!-- The tax tables use increments of $25 for income between $25 and $3,000 -->
          <Case>
            <When>
              <LessThan>
                <Left>
                  <Dependency path="/taxableIncome" />
                </Left>
                <Right>
                  <Dollar>3000</Dollar>
                </Right>
              </LessThan>
            </When>
            <Then>
              <Add>
                <StepwiseMultiply>
                  <Multiplicand>
                    <Dependency path="/taxableIncome" />
                  </Multiplicand>
                  <Rate>
                    <Rational>25/25</Rational>
                    <!-- $25 for every whole $25 of income -->
                  </Rate>
                </StepwiseMultiply>
                <Dollar>12.50</Dollar>
                <!-- Add $12.50 to find the midpoint of the row -->
              </Add>
            </Then>
          </Case>
          <!-- The tax tables use increments of $50 for income between $3,000 and $100,000 -->
          <Case>
            <When>
              <LessThan>
                <Left>
                  <Dependency path="/taxableIncome" />
                </Left>
                <Right>
                  <Dollar>100000</Dollar>
                </Right>
              </LessThan>
            </When>
            <Then>
              <Add>
                <StepwiseMultiply>
                  <Multiplicand>
                    <Dependency path="/taxableIncome" />
                  </Multiplicand>
                  <Rate>
                    <Rational>50/50</Rational>
                    <!-- $50 for every whole $50 of income -->
                  </Rate>
                </StepwiseMultiply>
                <Dollar>25</Dollar>
                <!-- Add $25 to find the midpoint of the row -->
              </Add>
            </Then>
          </Case>
          <!-- Income of $100,000 and over uses the tax computation worksheet -->
          <Case>
            <When>
              <GreaterThanOrEqual>
                <Left>
                  <Dependency path="/taxableIncome" />
                </Left>
                <Right>
                  <Dollar>100000</Dollar>
                </Right>
              </GreaterThanOrEqual>
            </When>
            <Then>
              <Dependency path="/taxableIncome" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/tentativeTaxFromTaxableIncome">
      <Description>Tentative tax as reported on line 16 of Form 1040. Rev Proc .01 Tax Rate Tables
        ยง1(j)(2)(A|B|C|D)
      </Description>
      <TaxYear>2025</TaxYear>
      <Derived>
        <Round>
          <Switch>
            <!-- MARRIED FILING JOINTLY AND QUALIFIED SURVIVING SPOUSE -->
            <Case>
              <When>
                <Any>
                  <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
                  <Dependency module="filingStatus" path="/isFilingStatusQSS" />
                </Any>
              </When>
              <Then>
                <Switch>
                  <!-- Not over $23,850: 10% of the taxable income -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>23850</Dollar>
                        </Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Multiply>
                        <Rational>10/100</Rational>
                        <Dependency path="/roundedTaxableIncome" />
                      </Multiply>
                    </Then>
                  </Case>

                  <!-- Over $23,850 but not over $96,950:
                $2,385 plus 12% of the excess over $23,850 -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>96950</Dollar>
                        </Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>2385</Dollar>
                        <Multiply>
                          <Rational>12/100</Rational>
                          <Subtract>
                            <Minuend>
                              <Dependency path="/roundedTaxableIncome" />
                            </Minuend>
                            <Subtrahends>
                              <Dollar>23850</Dollar>
                            </Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>

                  <!-- Over $96,950 but not over $206,700: $11,157 plus 22% of the excess over $96,950 -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>206700</Dollar>
                        </Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>11157</Dollar>
                        <Multiply>
                          <Rational>22/100</Rational>
                          <Subtract>
                            <Minuend>
                              <Dependency path="/roundedTaxableIncome" />
                            </Minuend>
                            <Subtrahends>
                              <Dollar>96950</Dollar>
                            </Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>

<!-- Over $206,700 but not over $394,600: $35,302 plus 24% of the excess over $206,700  -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>394600</Dollar>
                        </Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>35302</Dollar>
                        <Multiply>
                          <Rational>24/100</Rational>
                          <Subtract>
                            <Minuend>
                              <Dependency path="/roundedTaxableIncome" />
                            </Minuend>
                            <Subtrahends>
                              <Dollar>206700</Dollar>
                            </Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>

<!-- Over $394,600 but not over $501,050: $80,398 plus 32% of the excess over $394,600  -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>501050</Dollar>
                        </Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>80398</Dollar>
                        <Multiply>
                          <Rational>32/100</Rational>
                          <Subtract>
                            <Minuend>
                              <Dependency path="/roundedTaxableIncome" />
                            </Minuend>
                            <Subtrahends>
                              <Dollar>394600</Dollar>
                            </Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>

                  <!-- Over $501,050 but not over $751,600: $114,462 plus 35% of the excess over $501,050  -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>751600</Dollar>
                        </Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>114462</Dollar>
                        <Multiply>
                          <Rational>35/100</Rational>
                          <Subtract>
                            <Minuend>
                              <Dependency path="/roundedTaxableIncome" />
                            </Minuend>
                            <Subtrahends>
                              <Dollar>501050</Dollar>
                            </Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>

                  <!-- Over $751,600: $202,154.50 plus 37% of the excess over $751,600 -->
                  <Case>
                    <When>
                      <GreaterThan>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>751600</Dollar>
                        </Right>
                      </GreaterThan>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>202154.50</Dollar>
                        <Multiply>
                          <Rational>37/100</Rational>
                          <Subtract>
                            <Minuend>
                              <Dependency path="/roundedTaxableIncome" />
                            </Minuend>
                            <Subtrahends>
                              <Dollar>751600</Dollar>
                            </Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                </Switch>
              </Then>
            </Case>

            <!-- HEAD OF HOUSEHOLD -->
            <Case>
              <When>
                <Dependency module="filingStatus" path="/isFilingStatusHOH" />
              </When>
              <Then>
                <Switch>
                  <!-- Not over $17,000: 10% of the taxable income -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>17000</Dollar>
                        </Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Multiply>
                        <Rational>10/100</Rational>
                        <Dependency path="/roundedTaxableIncome" />
                      </Multiply>
                    </Then>
                  </Case>

                  <!-- Over $17,000 but not over $64,850: $1,700 plus 12% of the excess over $17,000 -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>64850</Dollar>
                        </Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>1700</Dollar>
                        <Multiply>
                          <Rational>12/100</Rational>
                          <Subtract>
                            <Minuend>
                              <Dependency path="/roundedTaxableIncome" />
                            </Minuend>
                            <Subtrahends>
                              <Dollar>17000</Dollar>
                            </Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>

                  <!-- Over $64,850 but not over $103,350: $7,442 plus 22% of the excess over $64,850  -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>103350</Dollar>
                        </Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>7442</Dollar>
                        <Multiply>
                          <Rational>22/100</Rational>
                          <Subtract>
                            <Minuend>
                              <Dependency path="/roundedTaxableIncome" />
                            </Minuend>
                            <Subtrahends>
                              <Dollar>64850</Dollar>
                            </Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>

                  <!-- Over $103,350 but not over $197,300: $15,912 plus 24% of the excess over $103,350 -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>197300</Dollar>
                        </Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>15912</Dollar>
                        <Multiply>
                          <Rational>24/100</Rational>
                          <Subtract>
                            <Minuend>
                              <Dependency path="/roundedTaxableIncome" />
                            </Minuend>
                            <Subtrahends>
                              <Dollar>103350</Dollar>
                            </Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>

                  <!-- Over $197,300 but not over $250,500: $38,460 plus 32% of the excess over $197,300 -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>250500</Dollar>
                        </Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>38460</Dollar>
                        <Multiply>
                          <Rational>32/100</Rational>
                          <Subtract>
                            <Minuend>
                              <Dependency path="/roundedTaxableIncome" />
                            </Minuend>
                            <Subtrahends>
                              <Dollar>197300</Dollar>
                            </Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>

                  <!-- Over $250,500 but not over $626,350: $55,484 plus 35% of the excess over $250,500 -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>626350</Dollar>
                        </Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>55484</Dollar>
                        <Multiply>
                          <Rational>35/100</Rational>
                          <Subtract>
                            <Minuend>
                              <Dependency path="/roundedTaxableIncome" />
                            </Minuend>
                            <Subtrahends>
                              <Dollar>250500</Dollar>
                            </Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>

                  <!-- Over $626,350: $187,031.50 plus 37% of the excess over $626,350 -->
                  <Case>
                    <When>
                      <GreaterThan>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>626350</Dollar>
                        </Right>
                      </GreaterThan>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>187031.50</Dollar>
                        <Multiply>
                          <Rational>37/100</Rational>
                          <Subtract>
                            <Minuend>
                              <Dependency path="/roundedTaxableIncome" />
                            </Minuend>
                            <Subtrahends>
                              <Dollar>626350</Dollar>
                            </Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                </Switch>
              </Then>
            </Case>

            <!-- SINGLE -->
            <Case>
              <When>
                <Dependency module="filingStatus" path="/isFilingStatusSingle" />
              </When>
              <Then>
                <Switch>
                  <!-- Not over $11,925: 10% of the taxable income -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>11925</Dollar>
                        </Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Multiply>
                        <Rational>10/100</Rational>
                        <Dependency path="/roundedTaxableIncome" />
                      </Multiply>
                    </Then>
                  </Case>

                  <!-- Over $11,925 but not over $48,475: $1,192.50 plus 12% of the excess over $11,925 -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>48475</Dollar>
                        </Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>1192.50</Dollar>
                        <Multiply>
                          <Rational>12/100</Rational>
                          <Subtract>
                            <Minuend>
                              <Dependency path="/roundedTaxableIncome" />
                            </Minuend>
                            <Subtrahends>
                              <Dollar>11925</Dollar>
                            </Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>

                  <!-- Over $48,475 but not over $103,350: $5,578.50 plus 22% of the excess over $48,475 -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>103350</Dollar>
                        </Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>5578.50</Dollar>
                        <Multiply>
                          <Rational>22/100</Rational>
                          <Subtract>
                            <Minuend>
                              <Dependency path="/roundedTaxableIncome" />
                            </Minuend>
                            <Subtrahends>
                              <Dollar>48475</Dollar>
                            </Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>

                  <!-- Over $103,350 but not over $197,300: $17,651 plus 24% of the excess over $103,350 -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>197300</Dollar>
                        </Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>17651</Dollar>
                        <Multiply>
                          <Rational>24/100</Rational>
                          <Subtract>
                            <Minuend>
                              <Dependency path="/roundedTaxableIncome" />
                            </Minuend>
                            <Subtrahends>
                              <Dollar>103350</Dollar>
                            </Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>

                  <!-- Over $197,300 but not over $250,525: $40,199 plus 32% of the excess over $197,300 -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>250525</Dollar>
                        </Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>40199</Dollar>
                        <Multiply>
                          <Rational>32/100</Rational>
                          <Subtract>
                            <Minuend>
                              <Dependency path="/roundedTaxableIncome" />
                            </Minuend>
                            <Subtrahends>
                              <Dollar>197300</Dollar>
                            </Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>

                  <!-- Over $250,525 but not over $626,350: $57,231 plus 35% of the excess over $250,525 -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>626350</Dollar>
                        </Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>57231</Dollar>
                        <Multiply>
                          <Rational>35/100</Rational>
                          <Subtract>
                            <Minuend>
                              <Dependency path="/roundedTaxableIncome" />
                            </Minuend>
                            <Subtrahends>
                              <Dollar>250525</Dollar>
                            </Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>

                  <!-- Over $626,350: $188,769.75 plus 37% of the excess over $626,350 -->
                  <Case>
                    <When>
                      <GreaterThan>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>626350</Dollar>
                        </Right>
                      </GreaterThan>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>188769.75</Dollar>
                        <Multiply>
                          <Rational>37/100</Rational>
                          <Subtract>
                            <Minuend>
                              <Dependency path="/roundedTaxableIncome" />
                            </Minuend>
                            <Subtrahends>
                              <Dollar>626350</Dollar>
                            </Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                </Switch>
              </Then>
            </Case>

            <!-- MARRIED FILING SEPARATELY -->
            <Case>
              <When>
                <Dependency module="filingStatus" path="/isFilingStatusMFS" />
              </When>
              <Then>
                <Switch>
                  <!-- Not over $11,925: 10% of the taxable income -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>11925</Dollar>
                        </Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Multiply>
                        <Rational>10/100</Rational>
                        <Dependency path="/roundedTaxableIncome" />
                      </Multiply>
                    </Then>
                  </Case>

                  <!-- Over $11,925 but not over $48,475: $1,192.50 plus 12% of the excess over $11,925 -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>48475</Dollar>
                        </Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>1192.50</Dollar>
                        <Multiply>
                          <Rational>12/100</Rational>
                          <Subtract>
                            <Minuend>
                              <Dependency path="/roundedTaxableIncome" />
                            </Minuend>
                            <Subtrahends>
                              <Dollar>11925</Dollar>
                            </Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>

                  <!-- Over $48,475 but not over $103,350: $5,578.50 plus 22% of the excess over $48,475 -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>103350</Dollar>
                        </Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>5578.50</Dollar>
                        <Multiply>
                          <Rational>22/100</Rational>
                          <Subtract>
                            <Minuend>
                              <Dependency path="/roundedTaxableIncome" />
                            </Minuend>
                            <Subtrahends>
                              <Dollar>48475</Dollar>
                            </Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>

                  <!-- Over $103,350 but not over $197,300: $17,651 plus 24% of the excess over $103,350 -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>197300</Dollar>
                        </Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>17651</Dollar>
                        <Multiply>
                          <Rational>24/100</Rational>
                          <Subtract>
                            <Minuend>
                              <Dependency path="/roundedTaxableIncome" />
                            </Minuend>
                            <Subtrahends>
                              <Dollar>103350</Dollar>
                            </Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>

                  <!-- Over $197,300 but not over $250,525: $40,199 plus 32% of the excess over $197,300 -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>250525</Dollar>
                        </Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>40199</Dollar>
                        <Multiply>
                          <Rational>32/100</Rational>
                          <Subtract>
                            <Minuend>
                              <Dependency path="/roundedTaxableIncome" />
                            </Minuend>
                            <Subtrahends>
                              <Dollar>197300</Dollar>
                            </Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>

                  <!-- Over $250,525 but not over $375,800: $57,231 plus 35% of the excess over $250,525 -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>375800</Dollar>
                        </Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>57231</Dollar>
                        <Multiply>
                          <Rational>35/100</Rational>
                          <Subtract>
                            <Minuend>
                              <Dependency path="/roundedTaxableIncome" />
                            </Minuend>
                            <Subtrahends>
                              <Dollar>250525</Dollar>
                            </Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>

                  <!-- Over $375,800: $101,077.25 plus 37% of the excess over $375,800 -->
                  <Case>
                    <When>
                      <GreaterThan>
                        <Left>
                          <Dependency path="/roundedTaxableIncome" />
                        </Left>
                        <Right>
                          <Dollar>375800</Dollar>
                        </Right>
                      </GreaterThan>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>101077.25</Dollar>
                        <Multiply>
                          <Rational>37/100</Rational>
                          <Subtract>
                            <Minuend>
                              <Dependency path="/roundedTaxableIncome" />
                            </Minuend>
                            <Subtrahends>
                              <Dollar>375800</Dollar>
                            </Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                </Switch>
              </Then>
            </Case>
          </Switch>
        </Round>
      </Derived>
    </Fact>

    <Fact path="/totalOwed">
      <Description>Estimated total taxes owed. The tax liability minus the total credits and total advance payments made during the tax year.
      </Description>
      <Derived>
        <Subtract>
          <Minuend>
            <Dependency path="/tentativeTaxFromTaxableIncome" />
          </Minuend>
          <Subtrahends>
            <Dependency path="/totalCredits" module="credits" />
            <Dependency path="/totalAdvancedPayments" module="payments" />
          </Subtrahends>
        </Subtract>
      </Derived>
    </Fact>

    <Fact path="/totalTax">
      <Derived>
        <Subtract>
          <Minuend>
            <Dependency path="/tentativeTaxFromTaxableIncome" />
          </Minuend>
          <Subtrahends>
            <Dependency path="/totalCredits" />
          </Subtrahends>
        </Subtract>
      </Derived>
    </Fact>
  </Facts>
</FactDictionaryModule>
