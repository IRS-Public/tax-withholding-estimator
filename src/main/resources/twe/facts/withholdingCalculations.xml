<?xml version="1.0"?>
<?xml-model href="./FactDictionaryModule.rng"?>
<FactDictionaryModule>
  <Facts>
    <Fact path="/jobs/*/restOfYearWithholding">
      <Derived>
        <Switch>
          <Case>
            <When>
              <Any>
                <Dependency path="../isPastJob"/>
              </Any>
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
          <Case>
            <When>
              <True/>
            </When>
            <Then>
              <Multiply>
                <!-- Floor is used here to match QA spreadsheet calculation -->
                <Dependency path="../fullPayPeriods"/>
                <Dependency path="../averageWithholdingPerPayPeriod"/>
              </Multiply>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>
    <Fact path="/jobs/*/endOfYearProjectedWithholding">
      <Description>The end of year amount withheld for this job if nothing is changed.</Description>
      <Derived>
        <Add>
          <Dependency path="../yearToDateWithholding"/>
          <Dependency path="../restOfYearWithholding"/>
        </Add>
      </Derived>
    </Fact>
    <Fact path="/jobs/*/restOfYearIncome">
      <Description>This amount this job will pay for the rest of the year.</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="../isPastJob"/>
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
          <Case>
            <When>
              <True/>
            </When>
            <Then>
              <Multiply>
                <Dependency path="../averagePayPerPayPeriod"/>
                <Add>
                  <Dependency path="../fullPayPeriods"/>
                  <Dependency path="../partialPayPeriods"/>
                </Add>
              </Multiply>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>
    <Fact path="/bonusWithholdingPrimaryRate">
      <Description>
        Bonus withholdings are 22% if less than 1,000,000 and 37% on the sum exceeding
        1,000,000. Ref: Pub 15, Section 7.
      </Description>
      <TaxYear>2026</TaxYear>
      <Derived>
        <Rational>22/100</Rational>
      </Derived>
    </Fact>
    <Fact path="/bonusWithholdingExcessRate">
      <Description>
        Bonus withholdings are 22% if less than 1,000,000 and 37% on the sum exceeding
        1,000,000. Ref: Pub 15, Section 7.
      </Description>
      <TaxYear>2026</TaxYear>
      <Derived>
        <Rational>37/100</Rational>
      </Derived>
    </Fact>
    <Fact path="/jobs/*/withholdingsFromTotalBonusReceived">
      <Description>
        Bonus withholdings are 22% if less than 1,000,000 and 37% on the sum exceeding
        1,000,000. Ref: Pub 15, Section 7.
      </Description>
      <Derived>
        <Round>
          <Switch>
            <Case>
              <When>
                <LessThanOrEqual>
                  <Left>
                    <Dependency path="../totalBonusReceived"/>
                  </Left>
                  <Right>
                    <Dependency path="/totalBonusReceivedThreshold"/>
                  </Right>
                </LessThanOrEqual>
              </When>
              <Then>
                <Multiply>
                  <Dependency path="/bonusWithholdingPrimaryRate"/>
                  <Dependency path="../totalBonusReceived"/>
                </Multiply>
              </Then>
            </Case>
            <Case>
              <When>
                <True/>
              </When>
              <Then>
                <Add>
                  <!-- 22% on the first $1,000,000-->
                  <Multiply>
                    <Dependency path="/bonusWithholdingPrimaryRate"/>
                    <Dependency path="/totalBonusReceivedThreshold"/>
                  </Multiply>
                  <!-- 37% on the amount exceeding $1,000,000-->
                  <Multiply>
                    <Dependency path="/bonusWithholdingExcessRate"/>
                    <Subtract>
                      <Minuend>
                        <Dependency path="../totalBonusReceived"/>
                      </Minuend>
                      <Subtrahends>
                        <Dependency path="/totalBonusReceivedThreshold"/>
                      </Subtrahends>
                    </Subtract>
                  </Multiply>
                </Add>
              </Then>
            </Case>
          </Switch>
        </Round>
      </Derived>
    </Fact>
    <Fact path="/jobs/*/proportionOfYearEndJobsIncome">
      <!--      TODO: average pay per period * pay periods in the table in worksheet 1A-->
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="../isHeldToYearEnd"/>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../annualizedIncome"/>
                </Dividend>
                <Divisors>
                  <Dependency path="/annualizedIncomeFromYearEndJobs"/>
                </Divisors>
              </Divide>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>
    <Fact path="/jobs/*/restOfYearStandardWithholding">
      <Derived>
        <Multiply>
          <Divide>
            <Dividend>
              <Dependency path="../standardAnnualWithholdingAmount"/>
            </Dividend>
            <Divisors>
              <Dependency path="../payPeriodsPerYear"/>
            </Divisors>
          </Divide>
          <Dependency path="../fullPayPeriods"/>
        </Multiply>
      </Derived>
    </Fact>
    <Fact path="/jobs/*/proportionOfRestOfYearStandardWithholding">
      <Derived>
        <Divide>
          <Dividend>
            <Dependency path="../restOfYearStandardWithholding"/>
          </Dividend>
          <Divisors>
            <Dependency path="/totalRestOfYearStandardWithholding"/>
          </Divisors>
        </Divide>
      </Derived>
    </Fact>
    <Fact path="/jobs/*/tentativeWithholdingAmount">
      <Description>Line 2h of Pub. 15-T Worksheet 1A. The amount from the Annual Method Percentage
        table.</Description>
      <Derived>
        <Divide>
          <Dividend>
            <Dependency path="../standardAnnualWithholdingAmount"/>
          </Dividend>
          <Divisors>
            <Dependency path="../payPeriodsPerYear"/>
          </Divisors>
        </Divide>
      </Derived>
    </Fact>
    <Fact path="/jobs/*/committedWithholding">
      <Description>
        The total amount that will be withheld from the paycheck if the W-4 is submitted today with
        no additional withholdings. This is also referred to as the "do-nothing withholding."
      </Description>
      <Derived>
        <Add>
          <Dependency path="../yearToDateWithholding"/>
          <Dependency path="../lagWithholding"/>
          <Dependency path="../futureTentativeWithholding"/>
          <Dependency path="../withholdingsFromTotalBonusReceived"/>
        </Add>
      </Derived>
    </Fact>
    <Fact path="/jobs/*/lagWithholding">
      <Description>
        The amount that will be withheld in the time between today and when the W-4 is expected to
        be processed.
      </Description>
      <Derived>
        <!-- future withholding, too soon to be changed and thus incorporates lag. Does not use Pub 15-T Worksheet 1a calculation -->
        <Multiply>
          <Dependency path="../averageWithholdingPerPayPeriod"/>
          <LesserOf>
            <Add>
              <Dependency path="../fullPayPeriods"/>
              <Dependency path="../partialPayPeriods"/>
            </Add>
            <!-- Casting this value to a rational -->
            <Multiply>
              <Dependency path="../payPeriodsBeforeW4ChangesAppear"/>
              <Rational>1/1</Rational>
            </Multiply>
          </LesserOf>
        </Multiply>
      </Derived>
    </Fact>
    <Fact path="/jobs/*/futureTentativeWithholding">
      <!-- future tentative withholding: result from Pub 15-T Worksheet 1A -->
      <!-- For now, we treat this as a "given" that won't change. Probably will need to revisit
      this when we get to reducing below tentative withholding. -->
      <Derived>
        <Multiply>
          <Dependency path="../tentativeWithholdingAmount"/>
          <GreaterOf>
            <Rational>0/1</Rational>
            <Subtract>
              <Minuend>
                <Add>
                  <Dependency path="../fullPayPeriods"/>
                  <Dependency path="../partialPayPeriods"/>
                </Add>
              </Minuend>
              <Subtrahends>
                <!-- Casting this value to a rational -->
                <Multiply>
                  <Dependency path="../payPeriodsBeforeW4ChangesAppear"/>
                  <Rational>1/1</Rational>
                </Multiply>
              </Subtrahends>
            </Subtract>
          </GreaterOf>
        </Multiply>
      </Derived>
    </Fact>
    <Fact path="/jobs/*/annualizedIncome">
      <Description>The earnings if the job duration were all year.</Description>
      <Derived>
        <Multiply>
          <Dependency path="../averagePayPerPayPeriod"/>
          <Dependency path="../payPeriodsPerYear"/>
        </Multiply>
      </Derived>
    </Fact>
    <Fact path="/jobSelectedForW4Line4a">
      <Description>The job selected to have Line 4a populated on a new W4. It is the year end job with the highest proportion of income among all year jobs, or if there are no year end jobs it is the job with highest proportion of standard withholding for the rest of the year.</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <GreaterThan>
                <Left>
                  <CollectionSize>
                    <Dependency path="/yearEndJobs"/>
                  </CollectionSize>
                </Left>
                <Right>
                  <Int>0</Int>
                </Right>
              </GreaterThan>
            </When>
            <Then>
              <IndexOf>
                <Collection>
                  <!-- When there is a year end job, use the year end job with highest proportion of income. -->
                  <!-- (This is effectively /yearEndJobs but we can't write it that way: Cases must use same collection.) -->
                  <Filter path="/jobs">
                    <Equal>
                      <Left>
                        <Maximum>
                          <Dependency path="/yearEndJobs/*/proportionOfYearEndJobsIncome"/>
                        </Maximum>
                      </Left>
                      <Right>
                        <Dependency path="proportionOfYearEndJobsIncome"/>
                      </Right>
                    </Equal>
                  </Filter>
                </Collection>
                <Index>
                  <Int>0</Int>
                </Index>
              </IndexOf>
            </Then>
          </Case>
          <Case>
            <When>
              <True/>
            </When>
            <Then>
              <!-- When there are no year end jobs, use the job with highest proportion of rest-of-year standard withholding. -->
              <IndexOf>
                <Collection>
                  <Filter path="/jobs">
                    <Equal>
                      <Left>
                        <Maximum>
                          <Dependency path="/jobs/*/proportionOfRestOfYearStandardWithholding"/>
                        </Maximum>
                      </Left>
                      <Right>
                        <Dependency path="proportionOfRestOfYearStandardWithholding"/>
                      </Right>
                    </Equal>
                  </Filter>
                </Collection>
                <Index>
                  <Int>0</Int>
                </Index>
              </IndexOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>
    <Fact path="/jobs/*/payPeriodsBeforeW4ChangesAppear">
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="../isPayFrequencyWeekly"/>
            </When>
            <Then>
              <Int>2</Int>
            </Then>
          </Case>
          <Case>
            <When>
              <Any>
                <Dependency path="../isPayFrequencyBiWeekly"/>
                <Dependency path="../isPayFrequencySemiMonthly"/>
              </Any>
            </When>
            <Then>
              <Int>1</Int>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../isPayFrequencyMonthly"/>
            </When>
            <Then>
              <Int>0</Int>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>
    <Fact path="/annualizedIncomeFromYearEndJobs">
      <Derived>
        <CollectionSum>
          <Dependency path="/yearEndJobs/*/annualizedIncome"/>
        </CollectionSum>
      </Derived>
    </Fact>
    <Fact path="/totalRestOfYearStandardWithholding">
      <Derived>
        <CollectionSum>
          <Dependency path="/jobs/*/restOfYearStandardWithholding"/>
        </CollectionSum>
      </Derived>
    </Fact>
    <Fact path="/jobsAvailableForExtraWithholding">
      <Description>Jobs that are ended or end too soon are not candidates for extra withholding on a
        new W4.</Description>
      <Derived>
        <!-- TODO: what should we do if no jobs meet this filter? -->
        <Filter path="/jobs">
          <GreaterThan>
            <Left>
              <Dependency path="/jobs/*/remainingPayPeriods"/>
            </Left>
            <Right>
              <Dependency path="/jobs/*/payPeriodsBeforeW4ChangesAppear"/>
            </Right>
          </GreaterThan>
        </Filter>
      </Derived>
    </Fact>
    <Fact path="/jobSelectedForExtraWithholding">
      <Description>The job selected for extra withholding on a new W4. The W4 refers to this as the
        "highest paying job".</Description>
      <Derived>
        <IndexOf>
          <Collection>
            <Filter path="/jobsAvailableForExtraWithholding">
              <Equal>
                <Left>
                  <Maximum>
                    <Dependency path="/jobsAvailableForExtraWithholding/*/restOfYearIncome"/>
                  </Maximum>
                </Left>
                <Right>
                  <Dependency path="restOfYearIncome"/>
                </Right>
              </Equal>
            </Filter>
          </Collection>
          <Index>
            <Int>0</Int>
          </Index>
        </IndexOf>
      </Derived>
    </Fact>
    <Fact path="/totalYearToDateJobsWithholding">
      <Description>Total actual withholding for all jobs</Description>
      <Derived>
        <CollectionSum>
          <Dependency path="/jobs/*/yearToDateWithholding"/>
        </CollectionSum>
      </Derived>
    </Fact>
    <Fact path="/totalEndOfYearProjectedWithholding">
      <Description>The amount withheld for all jobs if nothing is changed.</Description>
      <Derived>
        <Add>
          <CollectionSum>
            <Dependency path="/jobs/*/endOfYearProjectedWithholding"/>
          </CollectionSum>
          <Dependency path="/pensionsTotalEndOfYearProjectedWithholding"/>
        </Add>
      </Derived>
    </Fact>
    <Fact path="/withholdingGap">
      <Description>The rest-of-year withholding gap: taxes owed if nothing is changed.</Description>
      <Derived>
        <Subtract>
          <Minuend>
            <Dependency path="/totalOwed"/>
          </Minuend>
          <Subtrahends>
            <Dependency path="/totalEndOfYearProjectedWithholding"/>
          </Subtrahends>
        </Subtract>
      </Derived>
    </Fact>
    <Fact path="/taxGap">
      <Description>The tax gap once W-4s are updated and we account for the remaining pay periods. Effectively 1040 Line 37 - Lines 25d</Description>
      <Derived>
        <Subtract>
          <Minuend>
            <Dependency path="/totalOwed"/>
          </Minuend>
          <Subtrahends>
            <Dependency path="/totalCommittedWithholding"/>
          </Subtrahends>
        </Subtract>
      </Derived>
    </Fact>
    <Fact path="/totalCommittedWithholding">
      <Derived>
        <CollectionSum>
          <Dependency path="/jobs/*/committedWithholding"/>
        </CollectionSum>
      </Derived>
    </Fact>
    <Fact path="/jobs/*/pub15Worksheet1aLine1g">
      <Description>Line 1g of Pub 15-T Worksheet 1A</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/isFilingStatusMFJ"/>
            </When>
            <Then>
              <Dollar>12900</Dollar>
            </Then>
          </Case>
          <Case>
            <When>
              <True/>
            </When>
            <Then>
              <Dollar>8600</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>
    <Fact path="/jobs/*/adjustedAnnualWageAmount">
      <Description>Line 1i of Pub 15-T Worksheet 1A</Description>
      <Derived>
        <GreaterOf>
          <Dollar>0</Dollar>
          <Subtract>
            <Minuend>
              <Multiply>
                <Dependency path="../averagePayPerPayPeriod"/>
                <Dependency path="../payPeriodsPerYear"/>
              </Multiply>
            </Minuend>
            <Subtrahends>
              <Dependency path="../pub15Worksheet1aLine1g"/>
            </Subtrahends>
          </Subtract>
        </GreaterOf>
      </Derived>
    </Fact>
    <Fact path="/jobs/*/standardAnnualWithholdingAmount">
      <Description>Standard withholding rate schedules for use when Form W-4 Step 2 box is not
        checked. Line 2g of Pub. 15-T Worksheet 1A. These amounts are generally a base withholding
        amount plus a percentage of the excess of Annual Adjusted Wages Amount. The base withholding
        captures the total withholding for all the brackets below the one that the AAWA falls into. </Description>
      <TaxYear>2025</TaxYear>
      <Derived>
        <Switch>
          <!-- SINGLE OR MARRIED FILING SEPARATELY -->
          <Case>
            <When>
              <Any>
                <Dependency path="/isFilingStatusSingle"/>
                <Dependency path="/isFilingStatusMFS"/>
              </Any>
            </When>
            <Then>
              <Switch>
                <!-- Less than $6,400: no withholding -->
                <Case>
                  <When>
                    <LessThan>
                      <Left>
                        <Dependency path="../adjustedAnnualWageAmount"/>
                      </Left>
                      <Right>
                        <Dollar>6400</Dollar>
                      </Right>
                    </LessThan>
                  </When>
                  <Then>
                    <Dollar>0</Dollar>
                  </Then>
                </Case>
                <!-- At least $6,400 but less than $18,325: $0 plus 10% of the excess over $6,400 -->
                <Case>
                  <When>
                    <LessThan>
                      <Left>
                        <Dependency path="../adjustedAnnualWageAmount"/>
                      </Left>
                      <Right>
                        <Dollar>18325</Dollar>
                      </Right>
                    </LessThan>
                  </When>
                  <Then>
                    <Multiply>
                      <Rational>10/100</Rational>
                      <Subtract>
                        <Minuend>
                          <Dependency path="../adjustedAnnualWageAmount"/>
                        </Minuend>
                        <Subtrahends>
                          <Dollar>6400</Dollar>
                        </Subtrahends>
                      </Subtract>
                    </Multiply>
                  </Then>
                </Case>
                <!-- At least $18,325 but less than $54,875: $1,192.50 plus 12% of the excess over
            $18,325 -->
                <Case>
                  <When>
                    <LessThan>
                      <Left>
                        <Dependency path="../adjustedAnnualWageAmount"/>
                      </Left>
                      <Right>
                        <Dollar>54875</Dollar>
                      </Right>
                    </LessThan>
                  </When>
                  <Then>
                    <Add>
                      <Dollar>1192.50</Dollar>
                      <Multiply>
                        <Rational>12/100</Rational>
                        <Subtract>
                          <Minuend>
                            <Dependency path="../adjustedAnnualWageAmount"/>
                          </Minuend>
                          <Subtrahends>
                            <Dollar>18325</Dollar>
                          </Subtrahends>
                        </Subtract>
                      </Multiply>
                    </Add>
                  </Then>
                </Case>
                <!-- At least $54,875 but less than $109,750: $5,578.50 plus 22% of the excess
                  over $54,875 -->
                <Case>
                  <When>
                    <LessThan>
                      <Left>
                        <Dependency path="../adjustedAnnualWageAmount"/>
                      </Left>
                      <Right>
                        <Dollar>109750</Dollar>
                      </Right>
                    </LessThan>
                  </When>
                  <Then>
                    <Add>
                      <Dollar>5578.50</Dollar>
                      <Multiply>
                        <Rational>22/100</Rational>
                        <Subtract>
                          <Minuend>
                            <Dependency path="../adjustedAnnualWageAmount"/>
                          </Minuend>
                          <Subtrahends>
                            <Dollar>54875</Dollar>
                          </Subtrahends>
                        </Subtract>
                      </Multiply>
                    </Add>
                  </Then>
                </Case>
                <!-- At least $109,750 but less than $203,700: $17,651 plus 24% of the excess over
                  $109,750 -->
                <Case>
                  <When>
                    <LessThan>
                      <Left>
                        <Dependency path="../adjustedAnnualWageAmount"/>
                      </Left>
                      <Right>
                        <Dollar>203700</Dollar>
                      </Right>
                    </LessThan>
                  </When>
                  <Then>
                    <Add>
                      <Dollar>17651</Dollar>
                      <Multiply>
                        <Rational>24/100</Rational>
                        <Subtract>
                          <Minuend>
                            <Dependency path="../adjustedAnnualWageAmount"/>
                          </Minuend>
                          <Subtrahends>
                            <Dollar>109750</Dollar>
                          </Subtrahends>
                        </Subtract>
                      </Multiply>
                    </Add>
                  </Then>
                </Case>
                <!-- At least $203,700 but less than $256,925: $40,199 plus 32% of the excess over
                  $203,700 -->
                <Case>
                  <When>
                    <LessThan>
                      <Left>
                        <Dependency path="../adjustedAnnualWageAmount"/>
                      </Left>
                      <Right>
                        <Dollar>256925</Dollar>
                      </Right>
                    </LessThan>
                  </When>
                  <Then>
                    <Add>
                      <Dollar>40199</Dollar>
                      <Multiply>
                        <Rational>32/100</Rational>
                        <Subtract>
                          <Minuend>
                            <Dependency path="../adjustedAnnualWageAmount"/>
                          </Minuend>
                          <Subtrahends>
                            <Dollar>203700</Dollar>
                          </Subtrahends>
                        </Subtract>
                      </Multiply>
                    </Add>
                  </Then>
                </Case>
                <!-- At least $256,925 but less than $632,750: $57,231 plus 35% of the excess over
                  $256,925 -->
                <Case>
                  <When>
                    <LessThan>
                      <Left>
                        <Dependency path="../adjustedAnnualWageAmount"/>
                      </Left>
                      <Right>
                        <Dollar>632750</Dollar>
                      </Right>
                    </LessThan>
                  </When>
                  <Then>
                    <Add>
                      <Dollar>57231</Dollar>
                      <Multiply>
                        <Rational>35/100</Rational>
                        <Subtract>
                          <Minuend>
                            <Dependency path="../adjustedAnnualWageAmount"/>
                          </Minuend>
                          <Subtrahends>
                            <Dollar>256925</Dollar>
                          </Subtrahends>
                        </Subtract>
                      </Multiply>
                    </Add>
                  </Then>
                </Case>
                <!-- $632,750 and above: $188,769.75 plus 37% of the excess over $632,750 -->
                <Case>
                  <When>
                    <True/>
                  </When>
                  <Then>
                    <Add>
                      <Dollar>188769.75</Dollar>
                      <Multiply>
                        <Rational>37/100</Rational>
                        <Subtract>
                          <Minuend>
                            <Dependency path="../adjustedAnnualWageAmount"/>
                          </Minuend>
                          <Subtrahends>
                            <Dollar>632750</Dollar>
                          </Subtrahends>
                        </Subtract>
                      </Multiply>
                    </Add>
                  </Then>
                </Case>
              </Switch>
            </Then>
          </Case>
          <Case>
            <When>
              <Any>
                <Dependency path="/isFilingStatusMFJ"/>
                <Dependency path="/isFilingStatusQSS"/>
              </Any>
            </When>
            <Then>
              <Switch>
                <!-- Less than $17,100: no withholding -->
                <Case>
                  <When>
                    <LessThan>
                      <Left>
                        <Dependency path="../adjustedAnnualWageAmount"/>
                      </Left>
                      <Right>
                        <Dollar>17100</Dollar>
                      </Right>
                    </LessThan>
                  </When>
                  <Then>
                    <Dollar>0</Dollar>
                  </Then>
                </Case>
                <!-- At least $17,100 but less than $40,950: $0 plus 10% of the excess over
                  $17,100 -->
                <Case>
                  <When>
                    <LessThan>
                      <Left>
                        <Dependency path="../adjustedAnnualWageAmount"/>
                      </Left>
                      <Right>
                        <Dollar>40950</Dollar>
                      </Right>
                    </LessThan>
                  </When>
                  <Then>
                    <Multiply>
                      <Rational>10/100</Rational>
                      <Subtract>
                        <Minuend>
                          <Dependency path="../adjustedAnnualWageAmount"/>
                        </Minuend>
                        <Subtrahends>
                          <Dollar>17100</Dollar>
                        </Subtrahends>
                      </Subtract>
                    </Multiply>
                  </Then>
                </Case>
                <!-- At least $40,950 but less than $114,050: $2,385 plus 12% of the excess over
                  $40,950 -->
                <Case>
                  <When>
                    <LessThan>
                      <Left>
                        <Dependency path="../adjustedAnnualWageAmount"/>
                      </Left>
                      <Right>
                        <Dollar>114050</Dollar>
                      </Right>
                    </LessThan>
                  </When>
                  <Then>
                    <Add>
                      <Dollar>2385</Dollar>
                      <Multiply>
                        <Rational>12/100</Rational>
                        <Subtract>
                          <Minuend>
                            <Dependency path="../adjustedAnnualWageAmount"/>
                          </Minuend>
                          <Subtrahends>
                            <Dollar>40950</Dollar>
                          </Subtrahends>
                        </Subtract>
                      </Multiply>
                    </Add>
                  </Then>
                </Case>
                <!-- At least $114,050 but less than $223,800: $11,157 plus 22% of the excess over
                  $114,050 -->
                <Case>
                  <When>
                    <LessThan>
                      <Left>
                        <Dependency path="../adjustedAnnualWageAmount"/>
                      </Left>
                      <Right>
                        <Dollar>223800</Dollar>
                      </Right>
                    </LessThan>
                  </When>
                  <Then>
                    <Add>
                      <Dollar>11157</Dollar>
                      <Multiply>
                        <Rational>22/100</Rational>
                        <Subtract>
                          <Minuend>
                            <Dependency path="../adjustedAnnualWageAmount"/>
                          </Minuend>
                          <Subtrahends>
                            <Dollar>114050</Dollar>
                          </Subtrahends>
                        </Subtract>
                      </Multiply>
                    </Add>
                  </Then>
                </Case>
                <!-- At least $223,800 but less than $411,700: $35,302 plus 24% of the excess over
                  $223,800 -->
                <Case>
                  <When>
                    <LessThan>
                      <Left>
                        <Dependency path="../adjustedAnnualWageAmount"/>
                      </Left>
                      <Right>
                        <Dollar>411700</Dollar>
                      </Right>
                    </LessThan>
                  </When>
                  <Then>
                    <Add>
                      <Dollar>35302</Dollar>
                      <Multiply>
                        <Rational>24/100</Rational>
                        <Subtract>
                          <Minuend>
                            <Dependency path="../adjustedAnnualWageAmount"/>
                          </Minuend>
                          <Subtrahends>
                            <Dollar>223800</Dollar>
                          </Subtrahends>
                        </Subtract>
                      </Multiply>
                    </Add>
                  </Then>
                </Case>
                <!-- At least $411,700 but less than $518,150: $80,398 plus 32% of the excess over
                  $411,700 -->
                <Case>
                  <When>
                    <LessThan>
                      <Left>
                        <Dependency path="../adjustedAnnualWageAmount"/>
                      </Left>
                      <Right>
                        <Dollar>518150</Dollar>
                      </Right>
                    </LessThan>
                  </When>
                  <Then>
                    <Add>
                      <Dollar>80398</Dollar>
                      <Multiply>
                        <Rational>32/100</Rational>
                        <Subtract>
                          <Minuend>
                            <Dependency path="../adjustedAnnualWageAmount"/>
                          </Minuend>
                          <Subtrahends>
                            <Dollar>411700</Dollar>
                          </Subtrahends>
                        </Subtract>
                      </Multiply>
                    </Add>
                  </Then>
                </Case>
                <!-- At least $518,150 but less than $768,700: $114,462 plus 35% of the excess
                  over $518,150 -->
                <Case>
                  <When>
                    <LessThan>
                      <Left>
                        <Dependency path="../adjustedAnnualWageAmount"/>
                      </Left>
                      <Right>
                        <Dollar>768700</Dollar>
                      </Right>
                    </LessThan>
                  </When>
                  <Then>
                    <Add>
                      <Dollar>114462</Dollar>
                      <Multiply>
                        <Rational>35/100</Rational>
                        <Subtract>
                          <Minuend>
                            <Dependency path="../adjustedAnnualWageAmount"/>
                          </Minuend>
                          <Subtrahends>
                            <Dollar>518150</Dollar>
                          </Subtrahends>
                        </Subtract>
                      </Multiply>
                    </Add>
                  </Then>
                </Case>
                <!-- $768,700 and above: $202,154.50 plus 37% of the excess over $768,700 -->
                <Case>
                  <When>
                    <True/>
                  </When>
                  <Then>
                    <Add>
                      <Dollar>202154.50</Dollar>
                      <Multiply>
                        <Rational>37/100</Rational>
                        <Subtract>
                          <Minuend>
                            <Dependency path="../adjustedAnnualWageAmount"/>
                          </Minuend>
                          <Subtrahends>
                            <Dollar>768700</Dollar>
                          </Subtrahends>
                        </Subtract>
                      </Multiply>
                    </Add>
                  </Then>
                </Case>
              </Switch>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="/isFilingStatusHOH"/>
            </When>
            <Then>
              <Switch>
                <!-- Less than $13,900: no withholding -->
                <Case>
                  <When>
                    <LessThan>
                      <Left>
                        <Dependency path="../adjustedAnnualWageAmount"/>
                      </Left>
                      <Right>
                        <Dollar>13900</Dollar>
                      </Right>
                    </LessThan>
                  </When>
                  <Then>
                    <Dollar>0</Dollar>
                  </Then>
                </Case>
                <!-- At least $13,900 but less than $30,900: $0 plus 10% of the excess over
                  $13,900 -->
                <Case>
                  <When>
                    <LessThan>
                      <Left>
                        <Dependency path="../adjustedAnnualWageAmount"/>
                      </Left>
                      <Right>
                        <Dollar>30900</Dollar>
                      </Right>
                    </LessThan>
                  </When>
                  <Then>
                    <Multiply>
                      <Rational>10/100</Rational>
                      <Subtract>
                        <Minuend>
                          <Dependency path="../adjustedAnnualWageAmount"/>
                        </Minuend>
                        <Subtrahends>
                          <Dollar>13900</Dollar>
                        </Subtrahends>
                      </Subtract>
                    </Multiply>
                  </Then>
                </Case>
                <!-- At least $30,900 but less than $78,750: $1,700 plus 12% of the excess over
                  $30,900 -->
                <Case>
                  <When>
                    <LessThan>
                      <Left>
                        <Dependency path="../adjustedAnnualWageAmount"/>
                      </Left>
                      <Right>
                        <Dollar>78750</Dollar>
                      </Right>
                    </LessThan>
                  </When>
                  <Then>
                    <Add>
                      <Dollar>1700</Dollar>
                      <Multiply>
                        <Rational>12/100</Rational>
                        <Subtract>
                          <Minuend>
                            <Dependency path="../adjustedAnnualWageAmount"/>
                          </Minuend>
                          <Subtrahends>
                            <Dollar>30900</Dollar>
                          </Subtrahends>
                        </Subtract>
                      </Multiply>
                    </Add>
                  </Then>
                </Case>
                <!-- At least $78,750 but less than $117,250: $7,442 plus 22% of the excess over
                  $78,750 -->
                <Case>
                  <When>
                    <LessThan>
                      <Left>
                        <Dependency path="../adjustedAnnualWageAmount"/>
                      </Left>
                      <Right>
                        <Dollar>117250</Dollar>
                      </Right>
                    </LessThan>
                  </When>
                  <Then>
                    <Add>
                      <Dollar>7442</Dollar>
                      <Multiply>
                        <Rational>22/100</Rational>
                        <Subtract>
                          <Minuend>
                            <Dependency path="../adjustedAnnualWageAmount"/>
                          </Minuend>
                          <Subtrahends>
                            <Dollar>78750</Dollar>
                          </Subtrahends>
                        </Subtract>
                      </Multiply>
                    </Add>
                  </Then>
                </Case>
                <!-- At least $117,250 but less than $211,200: $15,912 plus 24% of the excess over
                  $117,250 -->
                <Case>
                  <When>
                    <LessThan>
                      <Left>
                        <Dependency path="../adjustedAnnualWageAmount"/>
                      </Left>
                      <Right>
                        <Dollar>211200</Dollar>
                      </Right>
                    </LessThan>
                  </When>
                  <Then>
                    <Add>
                      <Dollar>15912</Dollar>
                      <Multiply>
                        <Rational>24/100</Rational>
                        <Subtract>
                          <Minuend>
                            <Dependency path="../adjustedAnnualWageAmount"/>
                          </Minuend>
                          <Subtrahends>
                            <Dollar>117250</Dollar>
                          </Subtrahends>
                        </Subtract>
                      </Multiply>
                    </Add>
                  </Then>
                </Case>
                <!-- At least $211,200 but less than $264,400: $38,460 plus 32% of the excess over
                  $211,200 -->
                <Case>
                  <When>
                    <LessThan>
                      <Left>
                        <Dependency path="../adjustedAnnualWageAmount"/>
                      </Left>
                      <Right>
                        <Dollar>264400</Dollar>
                      </Right>
                    </LessThan>
                  </When>
                  <Then>
                    <Add>
                      <Dollar>38460</Dollar>
                      <Multiply>
                        <Rational>32/100</Rational>
                        <Subtract>
                          <Minuend>
                            <Dependency path="../adjustedAnnualWageAmount"/>
                          </Minuend>
                          <Subtrahends>
                            <Dollar>211200</Dollar>
                          </Subtrahends>
                        </Subtract>
                      </Multiply>
                    </Add>
                  </Then>
                </Case>
                <!-- At least $264,400 but less than $640,250: $55,484 plus 35% of the excess over
                  $264,400 -->
                <Case>
                  <When>
                    <LessThan>
                      <Left>
                        <Dependency path="../adjustedAnnualWageAmount"/>
                      </Left>
                      <Right>
                        <Dollar>640250</Dollar>
                      </Right>
                    </LessThan>
                  </When>
                  <Then>
                    <Add>
                      <Dollar>55484</Dollar>
                      <Multiply>
                        <Rational>35/100</Rational>
                        <Subtract>
                          <Minuend>
                            <Dependency path="../adjustedAnnualWageAmount"/>
                          </Minuend>
                          <Subtrahends>
                            <Dollar>264400</Dollar>
                          </Subtrahends>
                        </Subtract>
                      </Multiply>
                    </Add>
                  </Then>
                </Case>
                <!-- $640,250 and above: $187,031.50 plus 37% of the excess over $640,250 -->
                <Case>
                  <When>
                    <True/>
                  </When>
                  <Then>
                    <Add>
                      <Dollar>187031.50</Dollar>
                      <Multiply>
                        <Rational>37/100</Rational>
                        <Subtract>
                          <Minuend>
                            <Dependency path="../adjustedAnnualWageAmount"/>
                          </Minuend>
                          <Subtrahends>
                            <Dollar>640250</Dollar>
                          </Subtrahends>
                        </Subtract>
                      </Multiply>
                    </Add>
                  </Then>
                </Case>
              </Switch>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>
  </Facts>
</FactDictionaryModule>
