<?xml-model href="./FactDictionaryModule.rng"?>
<FactDictionaryModule>
  <Facts>
    <Fact path="/totalDeductions">
      <Name>Total deductions</Name>
      <Description>Total deductions as reported on line 14 of Form 1040. Includes three categories
        of below the
        line deductions:
        1) Standard or itemized deduction; 2) Section 199A (QBI); and 3) OB3 deductions
      </Description>
      <Derived>
        <Round>
          <Add>
            <Dependency path="/standardOrItemizedDeduction" />
            <!-- <Dependency path="/qualifiedBusinessIncomeDeduction" /> -->
            <!-- <Dependency path="/oB3Deductions" /> -->
          </Add>
        </Round>
      </Derived>
    </Fact>
    <Fact path="/oB3Deductions">
      <Name>OB3 Deductions</Name>
      <Description>Sum of all OB3 below the line deductions</Description>
      <Derived>
        <Add>
          <Dependency path="/qualifiedPersonalVehicleLoanInterestDeduction" />
          <Dependency path="/seniorDeduction" />
          <Dependency path="/qualifiedTipDeduction" />
          <Dependency path="/overtimeCompensationDeduction" />
        </Add>
      </Derived>
    </Fact>
    <Fact path="/wantsStandardDeduction">
      <Name>Wants standard deduction</Name>
      <Description>Will the taxpayer take the standard deduction?</Description>
      <Writable>
        <Boolean />
      </Writable>
      <Placeholder>
        <True />
      </Placeholder>
    </Fact>
    <Fact path="/wantsItemizedDeduction">
      <Name>Wants itemized deduction</Name>
      <Description>Will the taxpayer take the itemized deduction?</Description>
      <Writable>
        <Boolean />
      </Writable>
      <Placeholder>
        <False />
      </Placeholder>
    </Fact>

    <Fact path="/standardOrItemizedDeduction">
      <Name>Standard or itemized deductions</Name>
      <Description>The taxpayer's choice of standard or itemized deductions as reported on line 12
        of Form 1040.
        Currently only the standard deduction is supported.
      </Description>

      <Derived>
        <Round>
          <Switch>
            <Case>
              <When>
                <All>
                  <Dependency path="/wantsItemizedDeduction" />
                  <GreaterThan>
                    <Left>
                      <Dependency path="/itemizedDeduction" />
                    </Left>
                    <Right>
                      <Dependency path="/standardDeduction" />
                    </Right>
                  </GreaterThan>
                </All>
              </When>
              <Then>
                <Dependency path="/itemizedDeduction" />
              </Then>
            </Case>
            <Case>
              <When>
                <Dependency path="/wantsStandardDeduction" />
              </When>
              <Then>
                <Dependency path="/standardDeduction" />
              </Then>
            </Case>
          </Switch>
        </Round>
      </Derived>
    </Fact>
  </Facts>
</FactDictionaryModule>