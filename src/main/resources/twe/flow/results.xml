<?xml version="1.0"?>
<?xml-model href="./FlowConfig.rng"?>
<FlowConfig>
  <page title="Results" route="/results">
    <section>
      <h2>Your withholding results</h2>

      <fg-alert alert-type="warning" alert-key="withholding-gap-incomplete" condition="/withholdingGap" operator="notHasValue">
        <heading>You still need to complete earlier steps</heading>
        <p class="usa-alert__text">
          To use the estimator, you'll have to go back and complete <a href="/app/tax-withholding-estimator/">Step 1: About You</a>
        </p>
      </fg-alert>

      <div condition="/isOverwithheld" operator="isTrue">
        <p>Based on what you entered, we estimate that <strong>you're withholding more taxes than you need to.</strong></p>

        <p condition="/cannotZeroOutRefundDueToExcessWithholding" operator="isTrue">You'll likely get a federal tax refund for <fg-show path="/taxYear"/>.</p>
        <p condition="/cannotZeroOutRefundDueToExcessWithholding" operator="isTrue">If you'd like to get more take-home pay, you can <a class="usa-link" href="#heading-adjust-withholding-for-more-take-home-pay">adjust your withholding</a> to $0.</p>

        <p condition="/cannotZeroOutRefundDueToExcessWithholding" operator="isFalse">If you keep your withholding the same, you'll likely get a federal tax refund for <fg-show path="/taxYear"/>.</p>
        <p condition="/cannotZeroOutRefundDueToExcessWithholding" operator="isFalse">If you'd like to get more take-home pay, you can <a class="usa-link" href="#heading-adjust-withholding-for-more-take-home-pay">adjust your withholding</a>.</p>
      </div>

      <p condition="/isUnderwithheld" operator="isTrue">Based on what you entered, we estimate that <strong>you're not withholding enough taxes.</strong></p>
      <p condition="/isUnderwithheld" operator="isTrue">
        If you keep your withholding the same, you’ll likely owe taxes for <fg-show path="/taxYear"/>.
        <span condition="/mayBeSubjectToUnderpaymentPenalty" operator="isTrue">
          You may have to pay a penalty in addition to what you owe if you owe at least $1,000 and more than 10 percent of your tax bill.
        </span>
      </p>

      <p condition="/isUnderwithheld" operator="isTrue">
        If you’d like to get your tax balance closer to $0
        <span condition="/mayBeSubjectToUnderpaymentPenalty" operator="isTrue">and avoid paying a penalty</span>,
        you can <a class="usa-link" href="#heading-adjust-withholding-for-lower-tax-balance">adjust your withholding</a>.
      </p>

      <p condition="/isZeroRefund" operator="isTrue">Based on what you entered, we estimate that <strong>you’re withholding enough to cover your federal taxes.</strong></p>
      <p condition="/isZeroRefund" operator="isTrue">If you keep your withholding the same, it’s likely you won’t owe federal taxes for <fg-show path="/taxYear"/>.</p>
      <p condition="/isZeroRefund" operator="isTrue">If you <a class="usa-link" href="#heading-adjust-withholding">adjust your withholding</a>, your federal tax balance and take-home pay will change.</p>

      <div class="fg-estimate">
        <h3 class="fg-estimate__heading" condition="/isOverwithheld" operator="isTrue">Estimated federal tax refund</h3>
        <h3 class="fg-estimate__heading" condition="/isOverwithheld" operator="isFalse">Estimated federal tax owed</h3>
        <p class="fg-estimate__amount fg-estimate__amount-under-withheld" condition="/isUnderwithheld" operator="isTrue"><fg-show path="/withholdingGap"/></p>
        <p class="fg-estimate__amount" condition="/isUnderwithheld" operator="isFalse"><fg-show path="/withholdingSurplus"/></p>
      </div>
      <details class="fg-estimate__details">
        <summary>
          <h4>Your calculation</h4>
        </summary>
        <div class="usa-prose details-content">
          <p>First, we calculated your taxable income.</p>
          <table class="usa-table usa-table--borderless width-full">
            <caption class="usa-sr-only">Taxable income breakdown</caption>
            <thead class="usa-sr-only">
              <tr>
                <th scope="col">Description</th>
                <th scope="col">Amount</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="row">Gross income</th>
                <td><fg-show path="/grossIncomeTotal"/></td>
              </tr>
              <tr>
                <th scope="row">Income after payroll deductions</th>
                <td><fg-show path="/incomeTotal"/></td>
              </tr>
              <tr condition="/adjustmentsToIncome" operator="isGreaterThanZero">
                <th scope="row">Adjustments</th>
                <td>-<fg-show path="/adjustmentsToIncome"/></td>
              </tr>
              <tr>
                <th scope="row">
                  <span condition="/standardDeductionWillBeUsed" operator="isTrue">Standard Deduction</span>
                  <span condition="/standardDeductionWillBeUsed" operator="isFalse">Itemized Deduction</span>
                </th>
                <td>-<fg-show path="/standardOrItemizedDeduction"/></td>
              </tr>
              <tr condition="/additionalDeductions" operator="isGreaterThanZero">
                <th scope="row">Additional Deductions</th>
                <td>-<fg-show path="/additionalDeductions"/></td>
              </tr>
              <tr>
                <th scope="row">Taxable income</th>
                <td><fg-show path="/taxableIncome"/></td>
              </tr>
            </tbody>
          </table>

          <p>Then, we applied your federal tax bracket to your taxable income to calculate your taxes.</p>
          <table class="usa-table usa-table--borderless width-full">
            <caption class="usa-sr-only">Federal tax obligation breakdown</caption>
            <thead class="usa-sr-only">
              <tr>
                <th scope="col">Description</th>
                <th scope="col">Amount</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="row">Federal tax obligation</th>
                <td><fg-show path="/totalTaxObligationBeforeCreditsAndDeductions"/></td>
              </tr>
            </tbody>
          </table>

          <p>Finally, we applied your credits and subtracted any payments you already made towards your federal taxes.</p>
          <table class="usa-table usa-table--borderless width-full">
            <caption class="usa-sr-only">Federal tax balance breakdown</caption>
            <thead class="usa-sr-only">
              <tr>
                <th scope="col">Description</th>
                <th scope="col">Amount</th>
              </tr>
            </thead>
            <tbody>
              <tr condition="/totalCredits" operator="isGreaterThanZero">
                <th scope="row">Credits</th>
                <td>-<fg-show path="/totalCredits"/></td>
              </tr>
              <tr>
                <th scope="row">Federal tax withholding</th>
                <td>-<fg-show path="/totalEndOfYearProjectedWithholding"/></td>
              </tr>
              <tr condition="/totalEstimatedTaxesPaid" operator="isGreaterThanZero">
                <th scope="row">Estimated tax payments</th>
                <td>-<fg-show path="/totalEstimatedTaxesPaid"/></td>
              </tr>
              <tr>
                <th scope="row">
                  <span condition="/isUnderwithheld" operator="isTrue">Estimated federal tax owed</span>
                  <span condition="/isUnderwithheld" operator="isFalse">Estimated federal tax refund</span>
                </th>
                <td>
                  <span condition="/isUnderwithheld" operator="isTrue"><fg-show path="/withholdingGap"/></span>
                  <span condition="/isUnderwithheld" operator="isFalse"><fg-show path="/withholdingSurplus"/></span>
                </td>
              </tr>
            </tbody>
          </table>

          <p condition="/mayBeSubjectToUnderpaymentPenalty" operator="isTrue">If you owe at least $1,000 and more than 10 percent of your tax bill, you may have to pay a penalty in addition to your federal tax owed.</p>
          <p class="fg-estimate__disclaimer">Note: The IRS does not guarantee the accuracy of this estimate and accepts no liability resulting from your use of this estimation.</p>
        </div>
      </details>

      <h3 id="heading-adjust-withholding-for-more-take-home-pay" condition="/isOverwithheld" operator="isTrue">How to adjust your withholding to get more take-home pay</h3>
      <h3 id="heading-adjust-withholding-for-lower-tax-balance" condition="/isUnderwithheld" operator="isTrue">How to adjust your withholding to get more take-home pay</h3>
      <h3 id="heading-adjust-withholding" condition="/isZeroRefund" operator="isTrue">How to adjust your withholding</h3>

      <p condition="/hasJobsAvailableForExtraWithholdingButNotPensions" operator="isTrue">Use our recommendations to complete Form W-4.</p>
      <p condition="/hasJobsAvailableForExtraWithholdingButNotPensions" operator="isTrue"><modal-link for="modal-what-is-form-w-4">What's a Form W-4?</modal-link></p>

      <p condition="/hasPensionsAvailableForExtraWithholdingButNotJobs" operator="isTrue">Use our recommendations to complete Form W-4P.</p>
      <p condition="/hasPensionsAvailableForExtraWithholdingButNotJobs" operator="isTrue"><modal-link for="modal-what-is-form-w-4p">What's a Form W-4P?</modal-link></p>

      <p condition="/hasJobsAndPensionsAvailableForExtraWithholding" operator="isTrue">Use our recommendations to complete Forms W-4 and W-4P.</p>
      <p condition="/hasJobsAndPensionsAvailableForExtraWithholding" operator="isTrue"><modal-link for="modal-what-is-form-w-4-and-w-4p">What's a Form W-4 and W-4P?</modal-link></p>

      <h4 condition="/primaryFilerHasJobsOrPensionsAvailableForExtraWithholding" operator="isTrue">Your withholding</h4>
      <fg-withholding-adjustments
        if-true="/primaryFilerHasJobsAvailableForExtraWithholding"
        path="/jobsAvailableForExtraWithholdingAssignedToSelf"
        form-type="w-4"
      />
      <fg-withholding-adjustments
        if-true="/primaryFilerHasPensionsAvailableForExtraWithholding"
        path="/pensionsAvailableForExtraWithholdingAssignedToSelf"
        form-type="w-4p"
      />

      <h4 condition="/spouseHasJobsOrPensionsAvailableForExtraWithholding" operator="isTrue">Your spouse's withholding</h4>
      <fg-withholding-adjustments
        if-true="/spouseHasJobsAvailableForExtraWithholding"
        path="/jobsAvailableForExtraWithholdingAssignedToSpouse"
        form-type="w-4"
      />
      <fg-withholding-adjustments
        if-true="/spouseHasPensionsAvailableForExtraWithholding"
        path="/pensionsAvailableForExtraWithholdingAssignedToSpouse"
        form-type="w-4p"
      />

      <div class="usa-alert usa-alert--info">
        <div class="usa-alert__body">
          <h4 class="usa-alert__heading">Check your withholding every January</h4>
          <p class="usa-alert__text">This will help you decide if you need to make any adjustments for the year.</p>
        </div>
      </div>
    </section>
    <modal-dialog id="modal-what-is-form-w-4">
      <modal-heading>What’s a Form W-4?</modal-heading>
      <modal-content>
        <p>You need to submit a Form W-4 to each of your employers to help them withhold the right amount of taxes from your paychecks throughout the year.</p>
        <p>Withholding at the right rate ensures that you don’t withhold too much and get smaller paychecks, or withhold too little and end up owing a large amount, or even penalties, at the end of the year.</p>
        <p><a target="_blank" class="usa-link" href="https://www.irs.gov/forms-pubs/about-form-w-4">Learn more about Form W-4.</a></p>
      </modal-content>
    </modal-dialog>
    <modal-dialog id="modal-what-is-form-w-4p">
      <modal-heading>What’s a Form W-4P?</modal-heading>
      <modal-content>
        <p>You need to submit a Form W-4P to your pension or annuity providers to help them withhold the right amount of taxes from your payments throughout the year.</p>
        <p>Withholding at the right rate ensures that you don’t withhold too much and get smaller payments, or withhold too little and end up owing a large amount, or even penalties, at the end of the year.</p>
        <p><a target="_blank" class="usa-link" href="https://www.irs.gov/forms-pubs/about-form-w-4-p">Learn more about Form W-4P.</a></p>
      </modal-content>
    </modal-dialog>
    <modal-dialog id="modal-what-is-form-w-4-and-w-4p">
      <modal-heading>What’s a Form W-4 and W-4P?</modal-heading>
      <modal-content>
        <p>You need to submit a Form W-4 to each of your employers or a Form W-4P to your pension or annuity providers to help them withhold the right amount of taxes from your paycheck or pension payment throughout the year.</p>
        <p>Withholding at the right rate ensures that you don’t withhold too much and take home a smaller amount, or withhold too little and end up owing a large amount, or even penalties, at the end of the year.</p>
        <p><a target="_blank" class="usa-link" href="https://www.irs.gov/forms-pubs/about-form-w-4">Learn more about Form W-4.</a></p>
        <p><a target="_blank" class="usa-link" href="https://www.irs.gov/forms-pubs/about-form-w-4-p">Learn more about Form W-4P.</a></p>
      </modal-content>
    </modal-dialog>
    <modal-dialog id="modal-why-step-1-c">
      <modal-heading>Why is this recommended?</modal-heading>
      <modal-content>
        <p>This is the filing status you selected in Step 1 of the estimator.</p>
        <p>Your filing status affects your standard deduction and which credits and deductions you’re eligible for.</p>
      </modal-content>
    </modal-dialog>
    <modal-dialog id="modal-why-w-4p-step-2">
      <modal-heading>Why is this recommended?</modal-heading>
      <modal-content>
        <p>This steps helps you decide which job or pension you should withhold from.</p>
        <p>You’ve already completed this step by using the estimator.</p>
      </modal-content>
    </modal-dialog>
    <modal-dialog id="modal-why-w-4-step-2-c">
      <modal-heading>Why is this recommended?</modal-heading>
      <modal-content>
        <p>This is where you can say if you have more than one job, or if you and your spouse (if filing jointly) both work.</p>
        <p>Even if you have more than one job, the estimator will recommend leaving this box unchecked. This helps protect your privacy from an employer and your calculations will still be correct.</p>
      </modal-content>
    </modal-dialog>
    <modal-dialog id="modal-why-step-3">
      <modal-heading>Why is this recommended?</modal-heading>
      <modal-content>
        <p>Step 3 shows the total amount of credits you’re planning to claim in <fg-show path="/taxYear"/>.</p>
        <p>This total amount is based on the information you added to the estimator for your income, whether you have dependents, and which credits you think you’ll qualify for.</p>
      </modal-content>
    </modal-dialog>
    <modal-dialog id="modal-why-w-4-step-4-a">
      <modal-heading>Why is this recommended?</modal-heading>
      <modal-content>
        <p>Step 4 accounts for any differences between the income you earn from this job and your other taxable income. The amounts entered here help to adjust your withholding to account for this difference.</p>
        <p><strong>Step 4(a)</strong> is used if you entered other sources of taxable income into the estimator that's not from jobs, pensions, or annuities.</p>
      </modal-content>
    </modal-dialog>
    <modal-dialog id="modal-why-w-4p-step-4-a">
      <modal-heading>Why is this recommended?</modal-heading>
      <modal-content>
        <p>Step 4 accounts for any differences between the income you earn from this pension or annuity and your other taxable income. The amounts entered here help to adjust your withholding to account for this difference.</p>
        <p><strong>Step 4(a)</strong> is used if you entered other sources of taxable income into the estimator that's not from jobs, pensions, or annuities.</p>
      </modal-content>
    </modal-dialog>
    <modal-dialog id="modal-why-w-4-step-4-b">
      <modal-heading>Why is this recommended?</modal-heading>
      <modal-content>
        <p>Step 4 accounts for any differences between the income you earn from this job and your other taxable income. The amounts entered here help to adjust your withholding to account for this difference.</p>
        <p><strong>Step 4(b)</strong> includes the deductions and adjustments you entered into the estimator. These can help reduce how much of your income is taxed and the amount you need to withhold.</p>
      </modal-content>
    </modal-dialog>
    <modal-dialog id="modal-why-w-4p-step-4-b">
      <modal-heading>Why is this recommended?</modal-heading>
      <modal-content>
        <p>Step 4 accounts for any differences between the income you earn from this pension or annuity and your other taxable income. The amounts entered here help to adjust your withholding to account for this difference.</p>
        <p><strong>Step 4(b)</strong> includes the deductions and adjustments you entered into the estimator. These can help reduce how much of your income is taxed and the amount you need to withhold.</p>
      </modal-content>
    </modal-dialog>
    <modal-dialog id="modal-why-w-4-step-4-c">
      <modal-heading>Why is this recommended?</modal-heading>
      <modal-content>
        <p>Step 4 accounts for any differences between the income you earn from this job and your other taxable income. The amounts entered here help to adjust your withholding to account for this difference.</p>
        <p><strong>Step 4(c)</strong> is used if you need to withhold more from your paycheck. Otherwise, this box may be left blank.</p>
      </modal-content>
    </modal-dialog>
    <modal-dialog id="modal-why-w-4p-step-4-c">
      <modal-heading>Why is this recommended?</modal-heading>
      <modal-content>
        <p>Step 4 accounts for any differences between the income you earn from this pension or annuity and your other taxable income. The amounts entered here help to adjust your withholding to account for this difference.</p>
        <p><strong>Step 4(c)</strong> is used if you need to withhold more from your payment. Otherwise, this box may be left blank.</p>
      </modal-content>
    </modal-dialog>
  </page>
</FlowConfig>
